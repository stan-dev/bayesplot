<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PPCs for discrete outcomes — PPC-discrete • bayesplot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="PPCs for discrete outcomes — PPC-discrete"><meta property="og:description" content="Many of the PPC functions in bayesplot can
be used with discrete data. The small subset of these functions that can
only be used if y and yrep are discrete are documented
on this page. Currently these include rootograms for count outcomes and bar
plots for ordinal, categorical, and multinomial outcomes. See the
Plot Descriptions section below."><meta property="og:image" content="https://mc-stan.org/bayesplot/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bayesplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.14.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://mc-stan.org/rstan" class="external-link">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr" class="external-link">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm" class="external-link">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan" class="external-link">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo" class="external-link">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred" class="external-link">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools" class="external-link">rstantools</a>
    </li>
    <li>
      <a href="https://mc-stan.org/posterior" class="external-link">posterior</a>
    </li>
  </ul></li>
<li>
  <a href="https://mc-stan.org" class="external-link">Stan</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/mcmc_stan" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/bayesplot" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PPCs for discrete outcomes</h1>
    <small class="dont-index">Source: <a href="https://github.com/stan-dev/bayesplot/blob/HEAD/R/ppc-discrete.R" class="external-link"><code>R/ppc-discrete.R</code></a></small>
    <div class="hidden name"><code>PPC-discrete.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Many of the <a href="PPC-overview.html">PPC</a> functions in <strong>bayesplot</strong> can
be used with discrete data. The small subset of these functions that can
<em>only</em> be used if <code>y</code> and <code>yrep</code> are discrete are documented
on this page. Currently these include rootograms for count outcomes and bar
plots for ordinal, categorical, and multinomial outcomes. See the
<strong>Plot Descriptions</strong> section below.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ppc_bars</span><span class="op">(</span></span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">yrep</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>  linewidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  freq <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ppc_bars_grouped</span><span class="op">(</span></span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">yrep</span>,</span>
<span>  <span class="va">group</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  facet_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>  linewidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  freq <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ppc_rootogram</span><span class="op">(</span></span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">yrep</span>,</span>
<span>  style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"standing"</span>, <span class="st">"hanging"</span>, <span class="st">"suspended"</span>, <span class="st">"discrete"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  bound_distinct <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ppc_bars_data</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span>, group <span class="op">=</span> <span class="cn">NULL</span>, prob <span class="op">=</span> <span class="fl">0.9</span>, freq <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>y</dt>
<dd><p>A vector of observations. See <strong>Details</strong>.</p></dd>


<dt>yrep</dt>
<dd><p>An <code>S</code> by <code>N</code> matrix of draws from the posterior (or prior)
predictive distribution. The number of rows, <code>S</code>, is the size of the
posterior (or prior) sample used to generate <code>yrep</code>. The number of columns,
<code>N</code> is the number of predicted observations (<code>length(y)</code>). The columns of
<code>yrep</code> should be in the same order as the data points in <code>y</code> for the plots
to make sense. See the <strong>Details</strong> and <strong>Plot Descriptions</strong> sections for
additional advice specific to particular plots.</p></dd>


<dt>...</dt>
<dd><p>Currently unused.</p></dd>


<dt>prob</dt>
<dd><p>A value between <code>0</code> and <code>1</code> indicating the desired probability
mass to include in the <code>yrep</code> intervals. Set <code>prob=0</code> to remove the
intervals. (Note: for rootograms these are intervals of the <em>square roots</em>
of the expected counts.)</p></dd>


<dt>width</dt>
<dd><p>For bar plots only, passed to <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">ggplot2::geom_bar()</a></code> to control
the bar width.</p></dd>


<dt>size, fatten, linewidth</dt>
<dd><p>For bar plots, <code>size</code>, <code>fatten</code>, and <code>linewidth</code>
are passed to <code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">ggplot2::geom_pointrange()</a></code> to control the appearance of the
<code>yrep</code> points and intervals. For rootograms <code>size</code> is passed to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">ggplot2::geom_line()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">ggplot2::geom_pointrange()</a></code>.</p></dd>


<dt>freq</dt>
<dd><p>For bar plots only, if <code>TRUE</code> (the default) the y-axis will
display counts. Setting <code>freq=FALSE</code> will put proportions on the y-axis.</p></dd>


<dt>group</dt>
<dd><p>A grouping variable of the same length as <code>y</code>.
Will be coerced to <a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a> if not already a factor.
Each value in <code>group</code> is interpreted as the group level pertaining
to the corresponding observation.</p></dd>


<dt>facet_args</dt>
<dd><p>An optional list of  arguments (other than <code>facets</code>)
passed to <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">ggplot2::facet_wrap()</a></code> to control faceting.</p></dd>


<dt>style</dt>
<dd><p>For <code>ppc_rootogram</code>, a string specifying the rootogram
style. The options are <code>"discrete"</code>, <code>"standing"</code>, <code>"hanging"</code>, and
<code>"suspended"</code>. See the <strong>Plot Descriptions</strong> section, below, for
details on the different styles.</p></dd>


<dt>bound_distinct</dt>
<dd><p>For <code>ppc_rootogram(style = "discrete)</code>,
if <code>TRUE</code> then the observed counts will be plotted with different shapes
depending on whether they are within the bounds of the <code>y</code> quantiles.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The plotting functions return a ggplot object that can be further
customized using the <strong>ggplot2</strong> package. The functions with suffix
<code>_data()</code> return the data that would have been drawn by the plotting
function.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For all of these plots <code>y</code> and <code>yrep</code> must be integers, although
they need not be integers in the strict sense of <span style="R">R</span>'s
<a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a> type. For rootogram plots <code>y</code> and <code>yrep</code> must also
be non-negative.</p>
    </div>
    <div id="plot-descriptions">
    <h2>Plot Descriptions</h2>
    

<dl><dt><code>ppc_bars()</code></dt>
<dd><p>Bar plot of <code>y</code> with <code>yrep</code> medians and uncertainty intervals
superimposed on the bars.</p></dd>

<dt><code>ppc_bars_grouped()</code></dt>
<dd><p>Same as <code>ppc_bars()</code> but a separate plot (facet) is generated for each
level of a grouping variable.</p></dd>

<dt><code>ppc_rootogram()</code></dt>
<dd><p>Rootograms allow for diagnosing problems in count data models such as
overdispersion or excess zeros. In <code>standing</code>, <code>hanging</code>, and <code>suspended</code>
styles, they consist of a histogram of <code>y</code> with the expected counts based on
<code>yrep</code> overlaid as a line along with uncertainty intervals.</p>
<p>Meanwhile, in <code>discrete</code> style, median counts based on <code>yrep</code> are laid
as a point range with uncertainty intervals along with dots
representing the <code>y</code>.</p>
<p>The y-axis represents the square roots of the counts to approximately
adjust for scale differences and thus ease comparison between observed
and expected counts. Using the <code>style</code> argument, the rootogram can be
adjusted to focus on different aspects of the data:</p><ul><li><p><em>Standing</em>: basic histogram of observed counts with curve
showing expected counts.</p></li>
<li><p><em>Hanging</em>: observed counts hanging from the curve
representing expected counts.</p></li>
<li><p><em>Suspended</em>: histogram of the differences between expected and
observed counts.</p></li>
<li><p><em>Discrete</em>: a dot-and-whisker plot of the median counts and
dots representing observed counts.</p></li>
</ul><p>As it emphasizes the discrete nature of the count data,
using <code>discrete</code> style is suggested.</p>
<p><strong>All of the rootograms are plotted on the square root scale</strong>. See Kleiber
and Zeileis (2016) for advice on interpreting rootograms and selecting
among the different styles.</p></dd>


</dl></div>
    <div id="related-functions">
    <h2>Related functions</h2>
    

<p>In addition to the functions on this page that are restricted to discrete
outcomes, some general PPC/PPD functions also support discrete data
when requested:</p><ul><li><p><code><a href="PPC-test-statistics.html">ppc_stat()</a></code> and <code><a href="PPC-test-statistics.html">ppc_stat_grouped()</a></code> can visualize discrete test statistics
with predictive checks when <code>discrete = TRUE</code>.</p></li>
<li><p><code><a href="PPD-test-statistics.html">ppd_stat()</a></code> and <code><a href="PPD-test-statistics.html">ppd_stat_grouped()</a></code> can visualize discrete test statistics
from predictive draws when <code>discrete = TRUE</code>.</p></li>
<li><p><a href="PPC-distributions.html">ppc_ecdf_overlay</a> can visualize empirical CDFs for discrete statistics
with <code>discrete = TRUE</code>.</p></li>
<li><p><code><a href="PPC-distributions.html">ppc_pit_ecdf()</a></code> and <code><a href="PPC-distributions.html">ppc_pit_ecdf_grouped()</a></code> can also handle discrete
variables to plot PIT-ECDF of the empirical PIT values.</p></li>
</ul><p>These functions are not limited to discrete outcomes, but offer discrete-friendly
displays for integer-valued statistics.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Kleiber, C. and Zeileis, A. (2016).
Visualizing count data regressions using rootograms.
<em>The American Statistician</em>. 70(3): 296--303.
<a href="https://arxiv.org/abs/1605.01311" class="external-link">https://arxiv.org/abs/1605.01311</a>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other PPCs: 
<code><a href="PPC-censoring.html">PPC-censoring</a></code>,
<code><a href="PPC-distributions.html">PPC-distributions</a></code>,
<code><a href="PPC-errors.html">PPC-errors</a></code>,
<code><a href="PPC-intervals.html">PPC-intervals</a></code>,
<code><a href="PPC-loo.html">PPC-loo</a></code>,
<code><a href="PPC-overview.html">PPC-overview</a></code>,
<code><a href="PPC-scatterplots.html">PPC-scatterplots</a></code>,
<code><a href="PPC-test-statistics.html">PPC-test-statistics</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">9222017</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># bar plots</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">N</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, size <span class="op">=</span> <span class="va">N</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">f</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">yrep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fu">f</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">yrep</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 500 100</span>
<span class="r-in"><span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">50</span>, length <span class="op">=</span> <span class="fl">100</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GroupA"</span>, <span class="st">"GroupB"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="bayesplot-colors.html">color_scheme_set</a></span><span class="op">(</span><span class="st">"mix-pink-blue"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ppc_bars</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># split by group, change interval width, and display proportion</span></span></span>
<span class="r-in"><span><span class="co"># instead of count on y-axis</span></span></span>
<span class="r-in"><span><span class="fu"><a href="bayesplot-colors.html">color_scheme_set</a></span><span class="op">(</span><span class="st">"mix-blue-pink"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ppc_bars_grouped</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span>, <span class="va">group</span>, prob <span class="op">=</span> <span class="fl">0.5</span>, freq <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># example for ordinal regression using rstanarm</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mc-stan.org/rstanarm/" class="external-link">rstanarm</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/stan_polr.html" class="external-link">stan_polr</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">tobgp</span> <span class="op">~</span> <span class="va">agegp</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">esoph</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"probit"</span>,</span></span>
<span class="r-in"><span>  prior <span class="op">=</span> <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/priors.html" class="external-link">R2</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="st">"mean"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  init_r <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">12345</span>,</span></span>
<span class="r-in"><span>  <span class="co"># cores = 4,</span></span></span>
<span class="r-in"><span>  refresh <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># coded as character, so convert to integer</span></span></span>
<span class="r-in"><span><span class="va">yrep_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mc-stan.org/rstantools/reference/posterior_predict.html" class="external-link">posterior_predict</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">yrep_char</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          1          2          3          4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "0-9g/day" "0-9g/day"    "10-19"    "10-19" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">yrep_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">yrep_char</span>, stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="va">as.integer</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">esoph</span><span class="op">$</span><span class="va">tobgp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ppc_bars</span><span class="op">(</span><span class="va">y_int</span>, <span class="va">yrep_int</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ppc_bars_grouped</span><span class="op">(</span></span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">y_int</span>,</span></span>
<span class="r-in"><span>  yrep <span class="op">=</span> <span class="va">yrep_int</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="va">esoph</span><span class="op">$</span><span class="va">agegp</span>,</span></span>
<span class="r-in"><span>  freq<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  prob <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  fatten <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  size <span class="op">=</span> <span class="fl">1.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># rootograms for counts</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">yrep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">20</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="bayesplot-colors.html">color_scheme_set</a></span><span class="op">(</span><span class="st">"brightblue"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ppc_rootogram</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ppc_rootogram</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span>, prob <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ppc_rootogram</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span>, style <span class="op">=</span> <span class="st">"hanging"</span>, prob <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ppc_rootogram</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span>, style <span class="op">=</span> <span class="st">"suspended"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ppc_rootogram</span><span class="op">(</span><span class="va">y</span>, <span class="va">yrep</span>, style <span class="op">=</span> <span class="st">"discrete"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="PPC-discrete-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonah Gabry, Tristan Mahr.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '28ab84fbf0d3f58232875561b9a208cd',
    indexName: 'bayesplot',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

