<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Graphical posterior predictive checking — PPC-overview • bayesplot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Graphical posterior predictive checking — PPC-overview"><meta property="og:description" content="The bayesplot PPC module provides various plotting functions
for creating graphical displays comparing observed data to simulated data
from the posterior (or prior) predictive distribution. See the sections
below for a brief discussion of the ideas behind posterior predictive
checking, an overview of the available PPC plots, and tips on providing an
interface to bayesplot from another package.
For plots of posterior (or prior) predictive distributions that do not
include observed data see PPD-overview instead."><meta property="og:image" content="https://mc-stan.org/bayesplot/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bayesplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.13.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://mc-stan.org/rstan" class="external-link">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr" class="external-link">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm" class="external-link">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan" class="external-link">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo" class="external-link">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred" class="external-link">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools" class="external-link">rstantools</a>
    </li>
    <li>
      <a href="https://mc-stan.org/posterior" class="external-link">posterior</a>
    </li>
  </ul></li>
<li>
  <a href="https://mc-stan.org" class="external-link">Stan</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/mcmc_stan" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/bayesplot" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Graphical posterior predictive checking</h1>
    <small class="dont-index">Source: <a href="https://github.com/stan-dev/bayesplot/blob/HEAD/R/ppc-overview.R" class="external-link"><code>R/ppc-overview.R</code></a></small>
    <div class="hidden name"><code>PPC-overview.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <strong>bayesplot</strong> PPC module provides various plotting functions
for creating graphical displays comparing observed data to simulated data
from the posterior (or prior) predictive distribution. See the sections
below for a brief discussion of the ideas behind posterior predictive
checking, an overview of the available PPC plots, and tips on providing an
interface to <strong>bayesplot</strong> from another package.</p>
<p>For plots of posterior (or prior) predictive distributions that do <em>not</em>
include observed data see <a href="PPD-overview.html">PPD-overview</a> instead.</p>
    </div>


    <div id="details">
    <h2>Details</h2>
    <p>The idea behind posterior predictive checking is simple: if a model
is a good fit then we should be able to use it to generate data that looks
a lot like the data we observed.</p>
<div class="section">
<h3 id="posterior-predictive-distribution">Posterior predictive distribution<a class="anchor" aria-label="anchor" href="#posterior-predictive-distribution"></a></h3>
<p>To generate the data used for posterior predictive checks we simulate from
the <em>posterior predictive distribution</em>. The posterior predictive
distribution is the distribution of the outcome variable implied by a model
after using the observed data \(y\) (a vector of outcome values), and
typically predictors \(X\), to update our beliefs about the unknown
parameters \(\theta\) in the model. For each draw of the parameters
\(\theta\) from the posterior distribution
\(p(\theta \,|\, y, X)\)
we generate an entire vector of outcomes. The result is
an \(S \times N\) matrix of simulations, where \(S\) is the the
size of the posterior sample (number of draws from the posterior
distribution) and \(N\) is the number of data points in \(y\). That is,
each row of the matrix is an individual "replicated" dataset of \(N\)
observations.</p>
</div>
<div class="section">
<h3 id="notation">Notation<a class="anchor" aria-label="anchor" href="#notation"></a></h3>
<p>When simulating from the posterior predictive distribution we can use either
the same values of the predictors \(X\) that we used when fitting the model
or new observations of those predictors. When we use the same values of
\(X\) we denote the resulting simulations by \(y^{rep}\) as they
can be thought of as <em>replications</em> of the outcome \(y\) rather than
predictions for future observations. This corresponds to the notation from
Gelman et. al. (2013) and is the notation used throughout the documentation
for this package.</p>
</div>
<div class="section">
<h3 id="graphical-posterior-predictive-checking">Graphical posterior predictive checking<a class="anchor" aria-label="anchor" href="#graphical-posterior-predictive-checking"></a></h3>
<p>Using the datasets \(y^{rep}\) drawn from the posterior predictive
distribution, the functions in the <strong>bayesplot</strong> package produce various
graphical displays comparing the observed data \(y\) to the replications.
For a more thorough discussion of posterior predictive checking see
Chapter 6 of Gelman et. al. (2013).</p>
</div>
<div class="section">
<h3 id="prior-predictive-checking">Prior predictive checking<a class="anchor" aria-label="anchor" href="#prior-predictive-checking"></a></h3>
<p>To use <strong>bayesplot</strong> for <em>prior</em> predictive checks you can simply use draws
from the prior predictive distribution instead of the posterior predictive
distribution. See Gabry et al. (2019) for more on prior predictive checking
and when it is reasonable to compare the prior predictive distribution to the
observed data. If you want to avoid using the observed data for prior
predictive checks then you can use the <strong>bayesplot</strong> <a href="PPD-overview.html">PPD</a> plots instead,
which do not take a <code>y</code> argument, or you can use the PPC plots but provide
plausible or implausible <code>y</code> values that you want to compare to the prior
predictive realizations.</p>
</div>

    </div>
    <div id="ppc-plotting-functions">
    <h2>PPC plotting functions</h2>
    <p>The plotting functions for prior and
posterior predictive checking all have the prefix <code>ppc_</code> and all require
the arguments <code>y</code>, a vector of observations, and <code>yrep</code>, a matrix of
replications (in-sample predictions). The plots are organized into several
categories, each with its own documentation:</p><ul><li><p><a href="PPC-distributions.html">PPC-distributions</a>: Histograms, kernel density estimates, boxplots, and
other plots comparing the empirical distribution of data <code>y</code> to the
distributions of individual simulated datasets (rows) in <code>yrep</code>.</p></li>
<li><p><a href="PPC-test-statistics.html">PPC-test-statistics</a>: The distribution of a statistic, or a pair of
statistics, over the simulated datasets (rows) in <code>yrep</code> compared to value of
the statistic(s) computed from <code>y</code>.</p></li>
<li><p><a href="PPC-intervals.html">PPC-intervals</a>: Interval estimates of <code>yrep</code> with <code>y</code>
overlaid. The x-axis variable can be optionally specified by the user
(e.g. to plot against a predictor variable or over time).</p></li>
<li><p><a href="PPC-errors.html">PPC-errors</a>: Plots of predictive errors (<code>y - yrep</code>) computed from <code>y</code> and
each of the simulated datasets (rows) in <code>yrep</code>. For binomial models binned
error plots are also available.</p></li>
<li><p><a href="PPC-scatterplots.html">PPC-scatterplots</a>: Scatterplots (and similar visualizations) of the data
<code>y</code> vs. individual simulated datasets (rows) in <code>yrep</code>, or vs. the average
value of the distributions of each data point (columns) in <code>yrep</code>.</p></li>
<li><p><a href="PPC-discrete.html">PPC-discrete</a>: PPC functions that can only be used if <code>y</code> and <code>yrep</code> are
discrete. For example, rootograms for count outcomes and bar plots for
ordinal, categorical, and multinomial outcomes.</p></li>
<li><p><a href="PPC-loo.html">PPC-loo</a>: PPC functions for predictive checks based on (approximate)
leave-one-out (LOO) cross-validation.
'</p></li>
<li><p><a href="PPC-censoring.html">PPC-censoring</a>: PPC functions comparing the empirical
distribution of censored data <code>y</code> to the distributions of individual
simulated datasets (rows) in <code>yrep</code>.</p></li>
</ul></div>
    <div id="providing-an-interface-for-predictive-checking-from-another-package">
    <h2>Providing an interface for predictive checking from another package</h2>
    


<p>In addition to the various plotting functions, the <strong>bayesplot</strong> package
provides the S3 generic <code><a href="pp_check.html">pp_check()</a></code>. Authors of <span style="R">R</span> packages for
Bayesian inference are encouraged to define <code><a href="pp_check.html">pp_check()</a></code> methods for the
fitted model objects created by their packages. See the package vignettes for
more details and a simple example, and see the <strong>rstanarm</strong> and <strong>brms</strong>
packages for full examples of <code><a href="pp_check.html">pp_check()</a></code> methods.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Gabry, J. , Simpson, D. , Vehtari, A. , Betancourt, M. and
Gelman, A. (2019), Visualization in Bayesian workflow.
<em>J. R. Stat. Soc. A</em>, 182: 389-402. doi:10.1111/rssa.12378.
(<a href="https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssa.12378" class="external-link">journal version</a>,
<a href="https://arxiv.org/abs/1709.01449" class="external-link">arXiv preprint</a>,
<a href="https://github.com/jgabry/bayes-vis-paper" class="external-link">code on GitHub</a>)</p>
<p>Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari,
A., and Rubin, D. B. (2013). <em>Bayesian Data Analysis.</em> Chapman &amp; Hall/CRC
Press, London, third edition. (Ch. 6)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other PPCs: 
<code><a href="PPC-censoring.html">PPC-censoring</a></code>,
<code><a href="PPC-discrete.html">PPC-discrete</a></code>,
<code><a href="PPC-distributions.html">PPC-distributions</a></code>,
<code><a href="PPC-errors.html">PPC-errors</a></code>,
<code><a href="PPC-intervals.html">PPC-intervals</a></code>,
<code><a href="PPC-loo.html">PPC-loo</a></code>,
<code><a href="PPC-scatterplots.html">PPC-scatterplots</a></code>,
<code><a href="PPC-test-statistics.html">PPC-test-statistics</a></code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonah Gabry, Tristan Mahr.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '28ab84fbf0d3f58232875561b9a208cd',
    indexName: 'bayesplot',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

